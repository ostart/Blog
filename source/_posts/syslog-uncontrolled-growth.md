---
title: Неконтролируемый рост системных файлов Linux
date: 2022-04-22 19:24:00
tags: [C#, Linux, syslog, aspnetcore]
---

Интересную особенность работы ASP.NET Core приложения в Linux мне удалось недавно зафиксировать. Было установлено, что со временем системынй файлы Linux (а именно: syslog и daemon.log) вырастают до угрожающих размеров. Оказалось, что весь консольный вывод ASP.NET Core приложений попадал туда. А консольный вывод включал помимо ```AddConsole()``` ещё и консоль Serilog ```Write().ConsoleColored()```. Выставление корректных настроек секции Logging конфигурационных файлов appsetting.json позволил установить их уровень высоким и существенно уменьшить размеры системных файлов Linux.

``` csharp
"Logging": {
    "Console": {
        "LogLevel": {
            "*": "Error"
        }
    }
}
```

Оказывается, что системная служба ```journald``` ведёт логирование вывода на консоль в свои бинарные логи, а кроме того вносит записи о выводе на консоль в системные журналы Linux (syslog и daemon.log). Поэтому будьте внимательны при выставлении уровня логирования ваших приложений, особенно на продакшене.